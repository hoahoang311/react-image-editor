import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import React,{useCallback,useEffect,useRef}from"react";import{DesignLayer,TransformersLayer}from"../Layers";import{AppProviderOverridenValue}from"../../context";import{SET_CANVAS_SIZE}from"../../actions";import{useResizeObserver,useStore}from"../../hooks";import NodeControls from"../NodeControls";import CanvasNode from"./CanvasNode";import{CanvasContainer,StyledOrignalImage}from"./MainCanvas.styled";var MainCanvas=function(a){var b=a.setFaceBox,c=a.faceBox,d=a.setTopToChin,e=a.topToChin,f=a.topMargin,g=a.setTopMargin,h=useResizeObserver(),i=_slicedToArray(h,1),j=i[0],k=useStore(),l=useRef(null),m=useCallback(function(a){var b=a.width,c=a.height;k.dispatch({type:SET_CANVAS_SIZE,payload:{canvasWidth:b,canvasHeight:c}})},[]);return useEffect(function(){j(l.current,m)},[]),React.createElement(CanvasContainer,{className:"FIE_canvas-container",ref:l},!k.textIdOfEditableContent&&React.createElement(NodeControls,null),k.isShowOriginalImage&&React.createElement(StyledOrignalImage,{className:"FIE_original-image-compare",src:k.originalImage.src}),React.createElement(CanvasNode,null,React.createElement(AppProviderOverridenValue,{overridingValue:k},React.createElement(DesignLayer,null),React.createElement(TransformersLayer,{setFaceBox:b,faceBox:c,setTopToChin:d,topToChin:e,setTopMargin:g,topMargin:f}))))};MainCanvas.defaultProps={faceBox:{}};export default MainCanvas;