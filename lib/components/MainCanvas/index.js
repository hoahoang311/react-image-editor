import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import React,{useCallback,useEffect,useRef}from"react";import{DesignLayer,TransformersLayer}from"../Layers";import{AppProviderOverridenValue}from"../../context";import{SET_CANVAS_SIZE}from"../../actions";import{useResizeObserver,useStore}from"../../hooks";import NodeControls from"../NodeControls";import CanvasNode from"./CanvasNode";import{CanvasContainer,StyledOrignalImage}from"./MainCanvas.styled";var MainCanvas=function(a){var b=a.setFaceBox,c=a.faceBox,d=a.setTopToChin,e=useResizeObserver(),f=_slicedToArray(e,1),g=f[0],h=useStore(),i=useRef(null),j=useCallback(function(a){var b=a.width,c=a.height;h.dispatch({type:SET_CANVAS_SIZE,payload:{canvasWidth:b,canvasHeight:c}})},[]);return useEffect(function(){g(i.current,j)},[]),React.createElement(CanvasContainer,{className:"FIE_canvas-container",ref:i},!h.textIdOfEditableContent&&React.createElement(NodeControls,null),h.isShowOriginalImage&&React.createElement(StyledOrignalImage,{className:"FIE_original-image-compare",src:h.originalImage.src}),React.createElement(CanvasNode,null,React.createElement(AppProviderOverridenValue,{overridingValue:h},React.createElement(DesignLayer,null),React.createElement(TransformersLayer,{setFaceBox:b,faceBox:c,setTopToChin:d}))))};MainCanvas.defaultProps={faceBox:{}};export default MainCanvas;