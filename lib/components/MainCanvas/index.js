import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import React,{useCallback,useEffect,useRef}from"react";import{DesignLayer,TransformersLayer}from"../Layers";import{AppProviderOverridenValue}from"../../context";import{SET_CANVAS_SIZE}from"../../actions";import{useResizeObserver,useStore}from"../../hooks";import NodeControls from"../NodeControls";import CanvasNode from"./CanvasNode";import{CanvasContainer,StyledOrignalImage}from"./MainCanvas.styled";var MainCanvas=function(a){var b=a.setFaceBox,c=a.faceBox,d=a.setTopToChin,e=a.topToChin,f=a.topMargin,g=a.setTopMargin,h=a.setCropMeasure,i=useResizeObserver(),j=_slicedToArray(i,1),k=j[0],l=useStore(),m=useRef(null),n=useCallback(function(a){var b=a.width,c=a.height;l.dispatch({type:SET_CANVAS_SIZE,payload:{canvasWidth:b,canvasHeight:c}})},[]);return useEffect(function(){k(m.current,n)},[]),React.createElement(CanvasContainer,{className:"FIE_canvas-container",ref:m},!l.textIdOfEditableContent&&React.createElement(NodeControls,null),l.isShowOriginalImage&&React.createElement(StyledOrignalImage,{className:"FIE_original-image-compare",src:l.originalImage.src}),React.createElement(CanvasNode,null,React.createElement(AppProviderOverridenValue,{overridingValue:l},React.createElement(DesignLayer,null),React.createElement(TransformersLayer,{setFaceBox:b,faceBox:c,setTopToChin:d,topToChin:e,setTopMargin:g,topMargin:f,setCropMeasure:h}))))};MainCanvas.defaultProps={faceBox:{}};export default MainCanvas;